<!DOCTYPE html>
<html lang="es">


<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel de Token</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <div class="container">
        <header>
            <div class="logo-container">
                <img src="assets/Logo-large.webp" alt="Logo" class="logo">
            </div>
            <h1>Generador de Accesos</h1>
            <p>Sistema de gestión de invitaciones</p>
        </header>

        <nav class="tabs-container">
            <button class="tab-btn active" data-tab="generator">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                    <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                </svg>
                Generador
            </button>
            <button class="tab-btn" data-tab="pending">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                    <circle cx="9" cy="7" r="4"></circle>
                    <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                    <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                </svg>
                Pendientes
            </button>
            <button class="tab-btn" data-tab="special-guests">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                    <polyline points="14 2 14 8 20 8"></polyline>
                    <line x1="16" y1="13" x2="8" y2="13"></line>
                    <line x1="16" y1="17" x2="8" y2="17"></line>
                    <polyline points="10 9 9 9 8 9"></polyline>
                </svg>
                Invitados Especiales
            </button>
        </nav>

        <main>
            <!-- Tab 1: Generator -->
            <section id="generatorSection" class="tab-content active">
                <button id="generateBtn" class="primary-btn">
                    <span class="btn-text">Generar Token</span>
                    <span class="loader hidden"></span>
                </button>

                <div id="resultContainer" class="result-card hidden">
                    <div class="result-header">
                        <span class="status-badge" id="statusBadge">Habilitado</span>
                        <span class="timestamp" id="timestamp"></span>
                    </div>

                    <div class="url-group">
                        <label>URL de Invitación</label>
                        <div class="input-wrapper">
                            <input type="text" id="urlInput" readonly>
                            <button id="copyBtn" class="icon-btn" title="Copiar URL">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                    <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                                </svg>
                            </button>
                        </div>
                    </div>

                    <div class="token-info">
                        <div class="info-item">
                            <span class="label">ID:</span>
                            <span class="value" id="idValue"></span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Tab 2: Pending Users -->
            <section id="pendingSection" class="tab-content hidden">
                <div class="section-header">
                    <h2>Usuarios Pendientes</h2>
                    <span class="counter" id="userCounter">0 / 0</span>
                </div>

                <div id="pendingContainer" class="pending-container hidden">
                    <!-- User Card Section (Left) -->
                    <div class="pending-content">
                        <div id="userCard" class="user-card">
                            <div class="user-avatar" id="userAvatar">?</div>
                            <h3 class="user-name" id="userName">Nombre del Usuario</h3>
                            <p class="user-cedula" id="userCedula">Cédula</p>

                            <div class="user-details">
                                <div class="detail-row">
                                    <span class="detail-label">Categoría:</span>
                                    <span class="detail-value" id="userCategory">-</span>
                                </div>
                                <div class="detail-row">
                                    <span class="detail-label">Email:</span>
                                    <span class="detail-value" id="userEmail">-</span>
                                </div>
                                <div class="detail-row">
                                    <span class="detail-label">Teléfono:</span>
                                    <span class="detail-value" id="userPhone">-</span>
                                </div>
                                <div class="detail-row">
                                    <span class="detail-label">Asistencia:</span>
                                    <span class="detail-value" id="userAsistencia">-</span>
                                </div>
                            </div>

                            <div class="card-actions">
                                <button id="skipBtn" class="action-btn skip-btn">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round">
                                        <polyline points="13 17 18 12 13 7"></polyline>
                                        <polyline points="6 17 11 12 6 7"></polyline>
                                    </svg>
                                    Siguiente
                                </button>
                                <button id="approveBtn" class="action-btn approve-btn">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round">
                                        <polyline points="20 6 9 17 4 12"></polyline>
                                    </svg>
                                    Aprobar
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Sidebar Section (Right) - Category Filters -->
                    <div class="pending-sidebar">
                        <h3>Filtrar por Categoría</h3>
                        <div id="categoryFilters" class="filter-list">
                            <!-- Buttons will be dynamically inserted here -->
                        </div>
                    </div>
                </div>

                <div id="noUsersMessage" class="no-users-message hidden">
                    <p>No hay usuarios pendientes de aprobación</p>
                </div>

                <button id="loadUsersBtn" class="secondary-btn">
                    <span class="btn-text">Cargar Usuarios Pendientes</span>
                    <span class="loader hidden"></span>
                </button>
            </section>

            <!-- Tab 3: Special Guests -->
            <section id="specialGuestsSection" class="tab-content hidden">
                <div class="result-card guest-panel">
                    <div class="section-header">
                        <h2>Registro de Invitados Especiales</h2>
                        <p class="section-desc">Ingresa una lista de números de teléfono para autorizar invitaciones.
                        </p>
                    </div>

                    <div class="url-group">
                        <label for="guestInput">Agregar Nuevo Número</label>
                        <div class="input-wrapper input-group">
                            <input type="number" id="guestInput" class="text-input"
                                placeholder="099xxxxxxx (10 dígitos)">
                            <button id="addGuestBtn" class="icon-btn add-btn" title="Agregar">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <line x1="12" y1="5" x2="12" y2="19"></line>
                                    <line x1="5" y1="12" x2="19" y2="12"></line>
                                </svg>
                            </button>
                        </div>
                    </div>

                    <!-- Contact Picker Section -->
                    <div id="contactPickerWrapper" class="contact-picker-wrapper">
                        <div class="divider"><span>o importar desde</span></div>
                        <button id="contactPickerBtn" class="contact-btn">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                                <circle cx="9" cy="7" r="4"></circle>
                                <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                                <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                            </svg>
                            <span class="btn-text">Seleccionar de Contactos</span>
                        </button>
                        <div id="contactPickerNotice" class="contact-picker-notice hidden">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="12" cy="12" r="10"></circle>
                                <line x1="12" y1="16" x2="12" y2="12"></line>
                                <line x1="12" y1="8" x2="12.01" y2="8"></line>
                            </svg>
                            <span>Disponible solo en navegadores móviles (Chrome Android). En desktop usa el campo manual.</span>
                        </div>
                        <div id="contactPickerUnsupported" class="contact-picker-unsupported hidden">
                            Contact Picker no disponible en este navegador. Usa el campo manual arriba.
                        </div>
                    </div>

                    <div class="list-wrapper">
                        <label>Invitados en Lista (<span id="guestCount">0</span>)</label>
                        <div id="guestListContainer" class="guest-list-container">
                            <!-- Items inserted via JS -->
                        </div>
                    </div>

                    <div class="section-footer">
                        <button id="processGuestsBtn" class="primary-btn">
                            <span class="btn-text">Procesar Lista</span>
                            <span class="loader hidden"></span>
                        </button>
                    </div>

                    <div id="guestResult" class="guest-result hidden">
                        <!-- Result summary will go here -->
                    </div>
                </div>
            </section>
        </main>
    </div>
    <div id="toast" class="toast hidden">URL copiada al portapapeles</div>
    <script src="config.env.js"></script>
    <script src="config.js"></script>
    <script src="categories.js"></script>
    <script src="script.js"></script>
</body>

</html>